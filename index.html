<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador ODS - Educación Dual</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1a5cad; --secondary: #28a745; --dark: #2d3436; --light: #f4f7f6; }
        body { font-family: 'Inter', sans-serif; background-color: var(--light); color: var(--dark); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: var(--primary); text-align: center; font-size: 24px; margin-bottom: 10px; line-height: 1.3; }
        .status { text-align: center; color: #636e72; font-size: 14px; margin-bottom: 25px; font-weight: 600; }
        
        .search-area { 
            background: #e9ecef; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .search-box { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #dfe6e9; 
            border-radius: 8px; 
            font-size: 16px; 
            box-sizing: border-box;
        }

        .btn-buscar { 
            width: 100%;
            padding: 15px; 
            background: var(--primary); 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold;
            font-size: 16px;
        }
        
        .btn-buscar:hover { background: #154a8a; }

        .result-card { border: 1px solid #dfe6e9; padding: 20px; border-radius: 12px; margin-top: 15px; border-left: 8px solid var(--primary); background: #fff; }
        .ods-tag { display: inline-block; background: var(--secondary); color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-bottom: 10px; }
        .label { font-weight: 700; color: var(--primary); display: block; margin-top: 12px; text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px; }
        .content { font-size: 14px; line-height: 1.5; margin-top: 4px; color: #2d3436; }
        .highlight { color: #d35400; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <h1>Buscador de Carreras de Educación Dual alineados a los Objetivos de Desarrollo Sostenible de la Agenda 2030</h1>
    <p class="status">SISTEMA DE ALINEACIÓN ESTRATÉGICA COSAC 2025</p>
    
    <div class="search-area">
        <label for="carreraSelect" style="font-size: 14px; font-weight: bold;">Selecciona una carrera del listado:</label>
        <select id="carreraSelect" class="search-box" onchange="seleccionarCarrera()">
            <option value="">Cargando carreras...</option>
        </select>
        
        <div style="text-align: center; font-size: 12px; color: #636e72; margin: 5px 0;">— O BUSCA POR PALABRA CLAVE —</div>
        
        <input type="text" id="searchInput" class="search-box" placeholder="Ej: Mecatrónica, Energía, Agua, Residuos...">
        <button class="btn-buscar" onclick="searchData()">BUSCAR AHORA</button>
    </div>
    
    <div id="resultsArea"></div>
</div>

<script>
    // Tu base de datos (aquí pego una parte, asegúrate de tener los 80 registros)
    const data = [
        {
            "Código SCIAN ": "31-33",
            "Sector Industrial ": "Industrias manufactureras",
            "Carrera COSAC 2025 ": "Mantenimiento Industrial",
            "Módulo / Actividad de Aprendizaje ": "Mantenimiento preventivo a motores y sistemas de transmisión de potencia.",
            "Habilidad de Desarrollo Sostenible": "Pensamiento Sistémico: Analizar la interconexión de los componentes para optimizar el consumo de energía.",
            "ODS Vinculado": "ODS 7: Energía asequible y no contaminante",
            "Meta Agenda 2030 ": "Meta 7.3: Duplicar la tasa mundial de mejora de la eficiencia energética.",
            "Indicador de Logro ": "Porcentaje de reducción de consumo eléctrico en equipos intervenidos."
        },
        // ... (Pega aquí todos los demás registros que ya tienes)
    ];

    // 1. Función para llenar el listado desplegable automáticamente al cargar la página
    function cargarListado() {
        const select = document.getElementById('carreraSelect');
        // Extraer nombres de carreras únicos
        const carrerasUnicas = [...new Set(data.map(item => item["Carrera COSAC 2025 "].trim()))].sort();
        
        select.innerHTML = '<option value="">-- Selecciona una Carrera --</option>';
        carrerasUnicas.forEach(carrera => {
            const option = document.createElement('option');
            option.value = carrera;
            option.textContent = carrera;
            select.appendChild(option);
        });
    }

    // 2. Función cuando el usuario elige del select
    function seleccionarCarrera() {
        const carrera = document.getElementById('carreraSelect').value;
        document.getElementById('searchInput').value = carrera;
        searchData();
    }

    // 3. Función principal de búsqueda
    function searchData() {
        const query = document.getElementById('searchInput').value.toLowerCase().trim();
        const resultsArea = document.getElementById('resultsArea');
        resultsArea.innerHTML = '';
        
        if (query === "") return;

        const filtered = data.filter(row => {
            return Object.values(row).some(val => String(val).toLowerCase().includes(query));
        });

        if (filtered.length > 0) {
            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = 'result-card';
                card.innerHTML = `
                    <div class="ods-tag">${item['ODS Vinculado']}</div>
                    <span class="label">Carrera (Perfil de Egreso)</span>
                    <div class="content"><strong>${item['Carrera COSAC 2025 ']}</strong></div>
                    <span class="label">Actividad de Aprendizaje</span>
                    <div class="content">${item['Módulo / Actividad de Aprendizaje ']}</div>
                    <span class="label">Habilidad de Desarrollo Sostenible</span>
                    <div class="content"><em>${item['Habilidad de Desarrollo Sostenible']}</em></div>
                    <span class="label">Meta Agenda 2030</span>
                    <div class="content">${item['Meta Agenda 2030 ']}</div>
                    <span class="label" style="color:var(--secondary);">Indicador de Logro (Sugerencia para reporte)</span>
                    <div class="content" style="color: #d35400; font-weight:600;">${item['Indicador de Logro ']}</div>
                `;
                resultsArea.appendChild(card);
            });
        } else {
            resultsArea.innerHTML = '<p class="status">No se encontraron resultados.</p>';
        }
    }

    // Inicializar el listado al abrir la página
    window.onload = cargarListado;

    // Buscar al presionar Enter
    document.getElementById("searchInput").addEventListener("keypress", (e) => {
        if (e.key === "Enter") searchData();
    });
</script>

</body>
</html>
